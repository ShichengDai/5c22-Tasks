import numpy as np
from scipy.io import wavfile
import matplotlib.pyplot as plt
from checkclick import checkclick
from median import median
import time


#read files from previous work first
sr, detection = wavfile.read('detectionfile.wav')
sr, y = wavfile.read('degraded.wav')
sr, GT = wavfile.read('myclean.wav')
GT = [data[0] for data in GT ]
##Calculate for median filter


#change window size here
#windowsize = 2n + 2ex + 1  (ex > 1)
ex = range(1, 10000)
#ex = [10000]


MSE = []
for i in ex:

    det, windowsize = checkclick(detection, i)
    restored1 = median(det,windowsize,y)
    MSE.append(np.square(restored1 - GT).mean())

plt.plot(ex, MSE)
plt.show()















